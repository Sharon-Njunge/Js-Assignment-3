(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8024],{80722:function(e,n,t){"use strict";t.d(n,{Nb:function(){return c},YS:function(){return o},aD:function(){return a},tw:function(){return s},xr:function(){return r}}),t(5945),t(21595),t(6139),t(96223);var l=t(46724),a="_1286nb12t9 _1286nb12tx _1286nb14k9 _1286nb14ll _1286nb14mx _1286nb14o9 _1286nb18l _1286nb17os _1286nb17up _1286nb1399 _1286nb13gl _1286nb16ea _1286nb17y",r="_1286nb16os",c="_1286nb1h _1286nb1k _1286nb14k9 _1286nb14ll _1286nb14mx _1286nb14o9 _1286nb17y _1286nb187s _1286nb117l _1286nb18l _1286nb12v3",s="m87f4j2 _1286nb12il _1286nb128l _1286nb1239 _1286nb12d9 _1286nb12xl _1286nb132l _1286nb16xs _1286nb17oy _1286nb17q _1286nb12nx _1286nb16ea _1286nb18l _1286nb12t9",o=(0,l.c)({defaultClassName:"_1rgts1f4 _1286nb12xl _1286nb132l _1286nb199 _1286nb1ax _1286nb1j9 _1286nb18l _1286nb12v3 _1286nb118",variantClassNames:{calculating:{true:"_1286nb15d7",false:"_1rgts1f3 _1286nb15d7"}},defaultVariants:{calculating:!1},compoundVariants:[]})},63562:function(e,n,t){"use strict";t.d(n,{Bx:function(){return r},LI:function(){return a},PS:function(){return c},tu:function(){return s}}),t(5945),t(21595),t(30224);var l=t(46724),a=(0,l.c)({defaultClassName:"_1nit3sv5 _1nit3sv1 _1286nb1239 _1286nb1289 _1286nb12d9 _1286nb12i9 _1286nb12xl _1286nb132l _1286nb14k3 _1286nb14lf _1286nb14mr _1286nb14o3 _1286nb16ea _1286nb18l _1286nb12v3 _1286nb12ut _1286nb12t9 _1286nb119 _1286nb1m",variantClassNames:{label:{default:"_1286nb12i9 _1286nb12iq _1286nb1289 _1286nb128q",pinterest:"_1286nb12i9 _1286nb1289",viewSimilar:"_1286nb12i9 _1286nb1289"}},defaultVariants:{label:"default"},compoundVariants:[]}),r="_1286nb12xl _1286nb132l _1286nb18l",c=(0,l.c)({defaultClassName:"_1nit3sve _1nit3sva _1286nb12qx _1286nb12r5 _1286nb12nx _1286nb12nt _1286nb168s",variantClassNames:{label:{default:"_1286nb189 _1286nb185 _1286nb18e",pinterest:"_1286nb189 _1286nb185",viewSimilar:"_1286nb189 _1286nb185"}},defaultVariants:{label:"default"},compoundVariants:[]}),s="_1286nb1h _1286nb1k _1286nb123l _1286nb128l _1286nb12dl _1286nb12il _1286nb12xl _1286nb132l _1286nb14k3 _1286nb14lf _1286nb14mr _1286nb14o3 _1286nb187s _1286nb17y _1286nb13bf _1286nb146f _1286nb18l _1286nb12v3"},38024:function(e,n,t){"use strict";t.r(n),t.d(n,{AddToCollection:function(){return ec}});var l=t(52322),a=t(36590),r=t(93961),c=t(94951),s=t(61909),o=t(43954),i=e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,l.jsx)("path",{d:"M437 90H208.3c-6.8-28.6-32.6-50-63.3-50H75c-35.8 0-65 29.2-65 65v302c0 35.8 29.2 65 65 65h362c35.8 0 65-29.2 65-65V155c0-35.8-29.2-65-65-65M334 308h-53v53c0 13.8-11.2 25-25 25s-25-11.2-25-25v-53h-53c-13.8 0-25-11.2-25-25s11.2-25 25-25h53v-53c0-13.8 11.2-25 25-25s25 11.2 25 25v53h53c13.8 0 25 11.2 25 25s-11.2 25-25 25"})}),u=t(7415),b=t(63562),d=t(80722);let _=e=>{let{isCollapsed:n,added:t,onClick:a,mode:r}=e,{t:_}=(0,u.$G)("common"),h=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.T,{children:_("addToCollection")}),(0,l.jsx)(c.J,{as:t?i:o.Z,size:"base",color:t?"blueFreepik":void 0})]});return"large"===r?(0,l.jsxs)("button",{className:b.LI(),onClick:a,children:[h,(0,l.jsx)("span",{className:b.PS(),children:_(t?"addedToCollection":"addToCollection")})]}):(0,l.jsxs)("button",{className:n?d.tw:d.aD,onClick:a,children:[h,n&&(0,l.jsx)("span",{children:_(t?"addedToCollection":"addToCollection")})]})};var h=t(83476),f=t(96577),m=t.n(f);t(5945),t(21595),t(41119);var v=t(46724),x="c4jkjma c4jkjm1 _1286nb18l _1286nb1m _1286nb12v3 _1286nb1239 _1286nb1289 _1286nb12d9 _1286nb12i9 _1286nb14fl _1286nb14gf _1286nb14hl _1286nb14il _1286nb13df _1286nb14yb",p="_1286nb18l",j="c4jkjmc _1286nb1j _1286nb11ox",g=(0,v.c)({defaultClassName:"c4jkjmh c4jkjme _1286nb14hl _1286nb19f _1286nb13df _1286nb18l _1286nb12uf _1286nb12t9 _1286nb128f _1286nb14xn _1286nb12r3",variantClassNames:{active:{true:"_1286nb15nj",false:"_1286nb16ea"}},defaultVariants:{active:!1},compoundVariants:[]}),C=t(2784);let y=(0,C.createContext)({}),w=()=>(0,C.useContext)(y);var k=t(51752),N=t(15260),S=t(74133);let T=()=>{let e=Array.from({length:5},(e,n)=>n);return(0,l.jsx)(S.x,{marginBottom:"20",overflowY:"auto",children:e.map(e=>(0,l.jsx)(S.x,{className:g(),children:(0,l.jsx)(N.O.Rect,{height:20})},e))})},E=()=>{let{t:e}=(0,u.$G)("collections");return(0,l.jsx)("div",{className:j,children:(0,l.jsx)("p",{children:e("noCollectionsAvailable")})})};var I=t(53476),G=t(65479);let P=e=>{var n;return{id:e.id,name:e.name,author:(null===(n=e.author)||void 0===n?void 0:n.name)||void 0,hasResourceInCollection:e.hasResourceInCollection}};var D=t(72699),O=t(17581);let R=e=>{let{collections:n,isSelected:t,onSelect:a}=e,{t:r}=(0,u.$G)("common");return n&&0!==n.length?(0,l.jsx)("div",{className:j,children:n.map(e=>{let n=e.id&&(null==t?void 0:t.includes(e.id))||!1;return(0,l.jsxs)("button",{className:g({active:n}),onClick:()=>{a(e)},children:[(0,l.jsx)("span",{children:e.name}),n&&(0,l.jsx)(c.J,{as:D.Z}),(0,l.jsxs)("span",{className:"c4jkjml _1286nb12xl _1286nb132l _1286nb199 _1286nb1jf _1286nb168j _1286nb12nr _1286nb18l _1286nb12t9 _1286nb187s _1286nb15d7",children:[n?r("remove"):r("select"),(0,l.jsx)(c.J,{as:n?O.Z:D.Z})]})]},e.id)})}):(0,l.jsx)(E,{})},V=e=>{let{userCollectionsResult:n}=e,t=(0,I.Zl)(G.SC),a=(0,I.sJ)(G.oD),{data:r}=n,c=r.filter(e=>"owned"===e.ownership),{handleCollectionSelection:s,collectionsSelected:o}=w();return(0,C.useEffect)(()=>{""===a&&t(n)},[a,t,n]),(0,l.jsx)(R,{collections:c.map(P),onSelect:s,isSelected:o.map(e=>e.id)})},L=e=>{let{id:n}=e,{loadable:t}=(0,k.b)({page:1,resourceId:n});return"hasError"===t.state?(0,l.jsx)(E,{}):"loading"===t.state?(0,l.jsx)(T,{}):"hasValue"===t.state?(0,l.jsx)(V,{userCollectionsResult:t.contents}):(0,l.jsx)(T,{})},B=e=>{let{onCreate:n}=e,[t,a]=(0,C.useState)(""),{t:r}=(0,u.$G)("common");return(0,l.jsxs)("div",{className:p,children:[(0,l.jsx)("input",{type:"text",className:x,placeholder:"".concat(r("createNewCollection")),value:t,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(n(t),a(""))}}),(0,l.jsx)(h.f5,{color:"blue",radius:"none",onClick:()=>{n(t),a("")},children:(0,l.jsx)(S.x,{as:"span",lineHeight:"tight",children:r("addCollection")})})]})};var A=t(87656),Z=t(95075);let $=e=>{let{setToast:n}=(0,A.p)(),{t}=(0,u.$G)("collections"),{refresh:l}=(0,k.b)({page:1,resourceId:e});return{handleCreate:(0,C.useCallback)(async e=>{0!==e.length&&((await (0,Z.B)({name:e,description:"",type:"private"})).success?n({type:"success",message:t("collectionCreatedSuccessfully")}):n(),l())},[l,n,t])}},J=()=>{let{data:e,meta:{pagination:{nextPage:n}}}=(0,I.sJ)(G.SC);return{collections:e,nextPage:n}};var z=t(2439);let M=e=>{let{placeholder:n,onSearch:t}=e;return(0,l.jsxs)(S.x,{className:p,marginBottom:"20",children:[(0,l.jsx)("input",{type:"text",className:x,placeholder:n,onChange:e=>{t(e.target.value)}}),(0,l.jsx)(h.f5,{color:"blue",radius:"none",children:(0,l.jsx)(c.J,{as:z.Z})})]})},H=e=>{let{type:n,id:t,preview:a}=e,{t:r}=(0,u.$G)("common"),{collections:c}=J(),{isDirty:s,handleSaveChanges:o,handleSearch:i,isSearchByApi:b}=w(),{handleCreate:d}=$(t),_=c.length>=8||b;return(0,l.jsxs)("div",{className:"_1286nb18l _1286nb187s",children:[(0,l.jsx)("div",{className:"_1286nb19f _1286nb183 _1286nb18o _1286nb13bf",children:(0,l.jsx)(m(),{src:a,className:"_1286nb17",alt:"preview",fill:!0})}),(0,l.jsxs)("div",{className:"c4jkjm6 c4jkjm1 _1286nb18l _1286nb1m _1286nb12v3 _1286nb123x _1286nb128r _1286nb12dr _1286nb12ir _1286nb12uf _1286nb12s3 _1286nb16ea",children:[(0,l.jsx)("p",{className:"_1286nb12n9 _1286nb12r3 _1286nb11or",children:r("addToCollection")}),(0,l.jsxs)("div",{className:"c4jkjm1 _1286nb18l _1286nb1m _1286nb12v3",children:[_&&(0,l.jsx)(M,{placeholder:"".concat(r("search")),onSearch:i}),(0,l.jsx)(L,{id:t,preview:a,type:n})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(B,{onCreate:d}),(0,l.jsx)(h.gg,{color:"blue",marginTop:"20",radius:"xs",block:!0,onClick:o,disabled:!s,children:r("saveChanges")})]})]})]})};var Q=t(60083);let U=async e=>{let{id:n,collectionId:t,resourceType:l}=e;return await (0,Q.c)("/api/user/resources/".concat(n,"/collections"),"DELETE",{collectionId:t,resourceType:l})},q=async e=>{let{id:n,collectionId:t,resourceType:l}=e;return await (0,Q.c)("/api/user/resources/".concat(n,"/collections"),"POST",{collectionId:t,resourceType:l})};var F=t(38720),Y=t(9691);let X=()=>{let e=(0,Y.PN)();return(0,C.useCallback)(n=>{let{collectionId:t,collectionName:l,fileId:a,location:r}=n;e({collection_id:t,collection_name:l,event_name:"add_to_collection",event:"ga4event",file_id:a,location:r})},[e])},K=e=>{let{type:n,id:t,location:l}=e,[a,r]=(0,C.useState)([]),[c,s]=(0,C.useState)([]),[o,i]=(0,C.useState)([]),{collections:b}=J(),d=(0,I.Zl)((0,F.cO)({type:n,id:t})),{refresh:_}=(0,k.b)({page:1,resourceId:t}),{setToast:h}=(0,A.p)(),{t:f}=(0,u.$G)("collections"),m=X(),v=(0,C.useMemo)(()=>(null==b?void 0:b.length)>0?b.filter(e=>e.hasResourceInCollection).map(P):[],[b]);(0,C.useEffect)(()=>{(null==b?void 0:b.length)>0&&i(v)},[b,v]);let x=(0,C.useMemo)(()=>a.length>0||c.length>0,[a,c]),p=(0,C.useCallback)(async()=>{if(0===a.length&&0===c.length)return;let e=[];a.length>0&&e.push(q({id:t,collectionId:a.map(e=>e.id),resourceType:n})),c.length>0&&e.push(U({id:t,collectionId:c.map(e=>e.id),resourceType:n}));try{(await Promise.all(e)).every(e=>null==e?void 0:e.success)?(a.forEach(e=>{m({fileId:t,collectionId:e.id,collectionName:e.name,location:l})}),r([]),s([]),h({type:"success",message:f("changesSavedSuccessfully")}),d((null==o?void 0:o.length)===0)):h(),_()}catch(e){h()}},[null==o?void 0:o.length,a,c,t,l,_,m,d,h,f,n]),j=(0,C.useCallback)(e=>{let{array:n,collection:l}=e;return n.map(e=>e.id).includes(l.id)?n.filter(e=>e.id!==t):[...n,l]},[t]),g=(0,C.useCallback)(async e=>{i(n=>j({array:n,collection:e}))},[j]);return{isDirty:x,collectionsSelected:o,handleCollectionSelection:(0,C.useCallback)(async e=>{g(e),b.some(e=>e.id===t&&e.hasResourceInCollection)?s(n=>j({array:n,collection:e})):r(n=>j({array:n,collection:e}))},[b,t,j,g]),handleSaveChanges:p}},W=()=>{let{collections:e,nextPage:n}=J(),[t,l]=(0,C.useState)([]),a=(0,I.Zl)(G.oD),r=(0,C.useRef)();(0,C.useEffect)(()=>{(null==e?void 0:e.length)>0&&l(e.map(P))},[e,n]);let c=(0,C.useMemo)(()=>null!==n,[n]),s=n=>{l((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).map(P))},o=(0,C.useCallback)(async e=>{r.current&&clearTimeout(r.current),r.current=setTimeout(async()=>{a(e)},350)},[a]);return{isSearchByApi:c,searchCollections:t,handleSearch:e=>{c?o(e):s(e)}}},ee=e=>{let{children:n,id:t,type:a,location:r}=e,{collectionsSelected:c,handleCollectionSelection:s,handleSaveChanges:o,isDirty:i}=K({type:a,id:t,location:r}),{searchCollections:u,isSearchByApi:b,handleSearch:d}=W();return(0,l.jsx)(y.Provider,{value:{collectionsSelected:c,searchCollections:u,isSearchByApi:b,isDirty:i,handleCollectionSelection:s,handleSearch:d,handleSaveChanges:o},children:n})};var en=t(27674),et=t(21610),el=t(94285);let ea=()=>{let e=(0,Y.PN)();return(0,C.useCallback)(n=>{let{location:t,fileId:l}=n;e({event:"ga4event",event_name:"collect",location:t,file_id:l})},[e])},er=e=>{let{id:n,type:t,location:l}=e,{t:a}=(0,u.$G)("error"),r=(0,I.sJ)((0,F.cO)({id:n,type:t})),c=(0,I.rb)(G.oD),[s,o]=(0,C.useState)(!1),i=(0,et.dO)(),b=(0,el.aw)(),d=(0,et.A9)(),{setToast:_}=(0,A.p)(),h=(0,I.C)((0,G.Az)({page:1,resourceId:n,searchTerm:""})),f=ea(),m=(0,C.useCallback)(()=>{if(!i){d(),window.location.href="".concat(en.YC.href,"?").concat(b);return}h(),o(!0),f({location:l,fileId:n})},[i,h,f,l,n,d,b]);return{added:r,showModal:s,setShowModal:o,onClick:m,handleError:e=>{console.error(e),_({type:"danger",message:a("unknown")}),o(!1)},handleOpenChange:()=>{c(),o(!1)}}},ec=e=>{let{type:n,id:t,preview:c,mode:s,location:o}=e,{added:i,showModal:u,handleOpenChange:b,onClick:d}=er({id:t,type:n,location:o}),h=(0,r.U)().isCollapsed;return u?(0,l.jsx)(a.u_,{open:u,onOpenChange:b,thumbnail:!0,children:(0,l.jsx)(ee,{id:t,type:n,location:o,children:(0,l.jsx)(H,{type:n,id:t,preview:c})})}):(0,l.jsx)(_,{isCollapsed:h,onClick:d,added:i,mode:null!=s?s:"normal"})}},95075:function(e,n,t){"use strict";t.d(n,{B:function(){return a}});var l=t(60083);let a=e=>{let{name:n,description:t,type:a}=e;return(0,l.c)("/api/user/collections","POST",{name:n,...t&&{description:t},...a&&{type:a}})}},64184:function(e,n,t){"use strict";t.d(n,{X:function(){return a}});var l=t(60083);let a=e=>{let{page:n,resourceId:t,searchTerm:a,collectionIds:r,ownership:c}=e,s=r?r.join(","):void 0,o={page:"".concat(n),...t&&{resourceId:"".concat(t)},...a&&{"filter[term]":a},...s&&{"filter[ids]":s},...c&&{"filter[ownership]":c}},i="/api/user/collections?".concat(new URLSearchParams(o));return(0,l.c)(i,"GET")}},51752:function(e,n,t){"use strict";t.d(n,{b:function(){return c}});var l=t(2784),a=t(53476),r=t(65479);let c=e=>{let{page:n=1,resourceId:t}=e,[c,s]=(0,l.useState)(parseInt(String(Date.now()/3e4))),o=(0,a.sJ)(r.oD),i=(0,a.$P)((0,r.Az)({page:n,resourceId:t,searchTerm:o})),u=(0,a.C)((0,r.Az)({page:n,resourceId:t,searchTerm:o}));return(0,l.useEffect)(()=>{let e=parseInt(String(Date.now()/3e4));e!==c&&(s(e),u())},[c,u]),{loadable:i,refresh:u}}},65479:function(e,n,t){"use strict";t.d(n,{Lg:function(){return d},by:function(){return _},hD:function(){return m},Az:function(){return u},lm:function(){return h},u_:function(){return f},oD:function(){return i},SC:function(){return b}});var l=t(53476),a=t(64184),r=t(60083);let c=e=>(0,r.c)("/api/user/collections/".concat(e),"GET"),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return(0,r.c)("/api/collections/trends?locale=".concat(e),"GET")},o=e=>(0,r.c)("/api/collections?id=".concat(e),"GET"),i=(0,l.cn)({key:"searchTermState",default:""}),u=(0,l.CG)({key:"collectionsQuery",get:e=>{let{page:n,resourceId:t,searchTerm:l}=e;return async()=>{let{data:e,success:r}=await (0,a.X)({page:n,resourceId:t,searchTerm:l});if(!r)throw Error(e);return e}}}),b=(0,l.cn)({key:"userCollectionStoreState",default:{data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}}),d=(0,l.CG)({key:"collectionQuery",get:e=>{let{id:n}=e;return async()=>{let{data:e,success:t}=await c(n);if(!t)throw Error(e);return e}}}),_=(0,l.CG)({key:"collectionRelatedQuery",get:e=>{let{term:n,locale:t}=e;return async()=>{let e=new URLSearchParams({locale:t,...n&&{term:n}}).toString(),l=await fetch("/api/regular/search?".concat(e));if(!l.ok)throw Error(l.statusText);return l.json()}}}),h=(0,l.CG)({key:"collectionQuery",get:e=>{let{id:n}=e;return async()=>{let{data:e,success:t}=await o(n);if(!t)throw"FORBIDDEN"===e?"COLLECTION_FORBIDDEN":e;return e}},cachePolicy_UNSTABLE:{eviction:"lru",maxSize:15}}),f=(0,l.cn)({key:"followedCollectionsState",default:[]}),m=(0,l.CG)({key:"collectionTrendsQuery",get:e=>{let{locale:n}=e;return async()=>{let{data:e,success:t}=await s(n);if(!t)throw Error(e);return e}}})},93961:function(e,n,t){"use strict";t.d(n,{T:function(){return c},U:function(){return s}});var l=t(52322),a=t(2784);let r=(0,a.createContext)({isCollapsed:null}),c=e=>{let{isCollapsed:n,children:t}=e;return(0,l.jsx)(r.Provider,{value:{isCollapsed:n},children:t})},s=()=>(0,a.useContext)(r)},43954:function(e,n,t){"use strict";var l=t(52322);n.Z=e=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,l.jsx)("path",{d:"M437 90H208.3c-6.8-28.6-32.6-50-63.3-50H75c-35.8 0-65 29.2-65 65v302c0 35.8 29.2 65 65 65h362c35.8 0 65-29.2 65-65V155c0-35.8-29.2-65-65-65m15 317c0 8.3-6.7 15-15 15H75c-8.3 0-15-6.7-15-15V105c0-8.3 6.7-15 15-15h70c8.3 0 15 6.7 15 15v10c0 13.8 11.2 25 25 25h252c8.3 0 15 6.7 15 15z"}),(0,l.jsx)("path",{d:"M334 258h-53v-53c0-13.8-11.2-25-25-25s-25 11.2-25 25v53h-53c-13.8 0-25 11.2-25 25s11.2 25 25 25h53v53c0 13.8 11.2 25 25 25s25-11.2 25-25v-53h53c13.8 0 25-11.2 25-25s-11.2-25-25-25"})]})},41119:function(){},96223:function(){},6139:function(){},30224:function(){}}]);